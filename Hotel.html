<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="sim">
		<p id="hotel"></p>
		<p id="usuario"></p>
		<p>clique no botão para começar a usar o sistema!!</p>
		<button id="botão">Clique-me</button>
	</div>
	<script>
		var nome_hotel = prompt("digite o nome do hotel");
		var nome_usuario = prompt("Qual o seu nome?")
		document.getElementById("hotel").innerHTML = "hotel: " + nome_hotel; 
		document.getElementById("usuario").innerHTML = "usuario: " + nome_usuario;
		const button = document.getElementById("botão")
		button.addEventListener("click", (Hotel) =>{
			var senha = 2678;
		console.log(senha);
		alert ("O nome do hotel é " + nome_hotel);
		var senha_usuario = parseInt(prompt("Digite a senha: "))
		var cadastros = [];
		var reseva_events = 10.50 
		console.log(cadastros);
		var acum_cadastro = 0
		while(senha != senha_usuario){
			alert("Senha incoreta!! digite novamente.")
			var senha_usuario = parseInt(prompt("Digite a senha: "))
		}
		alert(`Seja bem vindo ${nome_usuario} ao hotel ${nome_hotel} é um imenso prazer telo aqui!`)
		var cafepessoa = 0.2;
		var aguapessoa = 0.5;
		var coxinhapessoa = 7;

		function inicio() {

			var escolha = parseInt(prompt('Selecione uma opção \n 1.)  Reserva de Quartos \n 2.) Cadastro de Hóspedes \n 3.) Abastecimento de Carros \n 4.) Sair \n 5.) Pesquisar / cadastrar \n 6.) gerenciamento de evento \n 7.) Serviço de ar '));


			switch (escolha) {
				case 1:
					reserva_quartos();
					break;

				case 2:
					cadastro_hospedes();
					break
				
				case 3:
					abastecer_carros();
					break

				case 4:
					sair();
					break

				case 5:
					inicio_cadastro();
					break

				case 6:
					escolha_evento();
					break

				case 7:
					ar();
					break

				default:
					erro();
					break;
			}

			// if (escolha === 1) {
			// 	reserva_quartos();
			// } else if (escolha === 2) {
			// 	cadastro_hospedes();
			// } else if (escolha === 3) {
			// 	abastecer_carros();
			// } else if (escolha === 4) {
			// 	sair();
			// } else {
			// 	erro();
			// }
		}		

		function reserva_quartos() {
			alert('HOTEL ' + nome_hotel +  ' - RESERVA DE QUARTOS');
			var valor_diaria = parseInt(prompt ("Qual o valor padrão da diaria?"));
			if(isNaN(valor_diaria) ||valor_diaria ==" " || valor_diaria <= 0){
				alert("Valor invalido!")
				inicio();
			}
			var n_diarias = parseInt(prompt("Quantas diarias são necessarias?"))
			if(isNaN(n_diarias) ||n_diarias ==" " || n_diarias <= 0){
				alert("Valor invalido!")
				inicio();
			}
			// 
			alert(`O valor de  ${n_diarias}   diarias é de   ${n_diarias * valor_diaria}  Reais`);
			var nome_hospede = prompt("Qual o nome do hóspde?")
			var comfirma = confirm(`voce confirma a hospedagem para ${nome_hospede} por ${n_diarias} Reais`)
			if(comfirma){
				alert(`${nome_usuario}, reserva efetuada para ${nome_hospede}. O valor total é de ${n_diarias * valor_diaria} Reais`)
				inicio();
			}
			else{
				alert(`${nome_usuario}, reserva não efetuada`)
				inicio();
			}
			inicio();
		}

		function cadastro_hospedes() {
			var valor = parseInt(prompt("Qual o valor padrão da diaria"))
			var n_diarias = 0
			var gratuidades = 0
			var meias = 0
			alert(`HOTEL ${nome_hotel} - CADASTRO DE HÓSPEDES`);
			var escolha = "s"
			while(escolha == "s"){
				var hospede = prompt("Qual o nome do hospede?");
				if(hospede == "PARE"){
					alert(`${nome_usuario}, o total de hospedagens é:${n_diarias}; ${gratuidades} gratuidade(s); ${meias} meia(s)`)
					escolha = "parar"
					inicio();
				}
				var idade = parseInt(prompt("Qual a idade do hospede?"));
				if(idade <= 6){
					gratuidades ++;
					alert(`${hospede} cadastrado com suscesso!, ${hospede} tem gratuidade`)
				}
				else if(idade >= 60){
					meias ++;
					alert(`${hospede} cadastrado com suscesso!, ${hospede} paga meia`)
					n_diarias += valor / 2
				}
				else{
					n_diarias += valor
					alert(`${hospede} cadastrado com suscesso!`)
				}
			}
		}


		function inicio_cadastro(){
			var escolha_cadastro = parseInt(prompt('Selecione uma opção \n 1.) cadastrar \n 2.) pesquisar \n 3.) Sair'));

			switch (escolha_cadastro) {
				case 1:
					cadastrar();
					break;
				
				case 2:
					pesquisar();
					break
				
				case 3:
					inicio();

				default:

					erro3();
					break;
			}
		}

		function cadastrar(){
			if (acum_cadastro > 15){
				alert("Máximo de cadastros atingido")
				inicio();
			}
			else{
			acum_cadastro += 1;
			var register = prompt("Qual o nome do hospede?");
			cadastros = register.split(", ")
			alert(`O hóspede ${cadastros} foi cadastrado com suscesso!`)
			inicio_cadastro();
			}
			console.log(acum_cadastro);
		}

		function pesquisar(){
			var search = prompt("digite o nome do hospede")
			var validação = cadastros.includes(search);
			if(validação){
				alert("usuario encontrado!")
			}
			else{
				alert("usuario nao encontrado")
			}
			inicio_cadastro();
		}

		function escolha_evento(){
			alert("Gerenciamento de eventos")
			var escolhas_event = parseInt(prompt("Selecione uma opção \n 1.) preço do evento \n 2.) Buffet \n 3.) Auditorio \n 4.) Vereficar horario \n 5.) inicio"));
			switch (escolhas_event) {
				case 1:
					evento();
					break;

				case 2:
					buffet();
					break;

				case 3:
					auditorios();
					break;

				case 4:
					horarios();
					break;

				case 5:
					inicio();
					break

				default:
					erro2();
					break
			}
		}

		function evento(){	
			alert(`HOTEL ${nome_hotel} - EVENTOS`);
			var horas = parseFloat(prompt("qual a duração do evento em horas?"));
			if(isNaN(horas) || horas == ""){	
			while(isNaN(horas) || horas == " "){
			alert("operação invalida!!");	
			var horas = parseFloat(prompt("qual a duração do evento em horas?"));			
				}
			}
			var garsom = parseFloat(prompt("quantos garçons serão necessarios?"));
			if(isNaN(garsom) || garsom == ""){	
			while(isNaN(garsom) || garsom == " "){
			alert("operação invalida!!");	
			var garsom = parseFloat(prompt("quantos garçons serão necessarios?"));			
				}
			}		
			var total = (horas * reseva_events) * garsom;
			let confirmar = confirm(`O total da reseva fica em ${total} REAIS quer confirmar a reserva?`)
			if(confirmar == true){
				alert("reserva efetuada!!")
				escolha_evento();
			}
			else{
				alert("reserva cancelada!!")
				escolha_evento();
			}
		}

		function buffet(){
			alert(`HOTEL ${nome_hotel} - buffet`);
			var pessoas = prompt("Qual a quantidade de Pessoas");
			if(pessoas > 350){
				alert("quantidade de convidados superior à capacidade máxima");
			}
			else{
				var cafe = parseFloat(pessoas * cafepessoa);
				var agua = parseFloat(pessoas * aguapessoa);
				var coxinha = parseFloat(pessoas * coxinhapessoa);
				var valorcafe = parseFloat(cafe * 0.80);
				var valoragua = parseFloat(agua * 0.40);
				var valorcoxi = parseFloat(coxinha * 0.34)
				var total = valorcafe + valoragua + valorcoxi;
				alert(`O evento precisará de ${cafe} litros de café, ${agua} litros de água, ${coxinha} salgados. O custo total do evento será de R$ ${total}`);
				confirm("Gostaria de efetuar a reserva?")
				if(confirm){
					alert(`${nome_usuario}, reserva efetuada com sucesso.`)
					escolha_evento();
				}
				else{
					alert("Reserva cancelada!")
					escolha_evento();
				}
			}
		}

		function auditorios(){
			var peaples = prompt("qual o numero de convidados?")
			if(peaples <= 0 || peaples > 350){
				alert("Número de convidados inválido");
				auditorios();
			}
			else if (peaples <= 150){
				alert("use o auditorio laranja!");
			}
			else if (peaples > 150 && peaples <=220){
				var cadeiras = peaples - 150;
				alert(`Use o auditório Laranja (inclua mais ${cadeiras} cadeiras)`);
			}
			
			else{
				alert("use o auditorio colorado!!");
			}
		
			confirm("Gostaria de efetuar a reserva?");
			if (confirm) {
				alert(`${nome_usuario}, reserva efetuada com sucesso.`)
				escolha_evento();
			}
			else{
				alert("reserva não efetuada!!")
				escolha_evento();
			}
		}

		function horarios(){
			alert(`HOTEL ${nome_hotel} - HORARIO`);
			var semana = ["segunda", "terça", "quarta", "quinta", "sexta"];
			var final = ["sabado", "domingo"];
			var dia = prompt("Qual o dia do seu evento?");
			var validação = semana.includes(dia);
			var validação2 = final.includes(dia);
			if(validação){
				var hora = prompt("qual a hora do evento?")
				if(hora < 23 && hora > 7){
					var empresa = prompt("Qual o nome da empresa?")
					alert(`Restaurante reservado para ${empresa}. ${dia} às 13hs.`)
				}
				else if(isNaN(hora) || hora == " " || hora < 0){
					alert("operação invalida!!")
					horarios();
				}
				else{
					alert("Restaurante indisponível")
				}
				escolha_evento();
			}
			else if(validação2){
				var hora = prompt("qual a hora do evento?")
				if(hora < 15 && hora > 7){
					var empresa = prompt("Qual o nome da empresa?")
					alert(`Restaurante reservado para ${empresa}. ${dia} às 13hs.`)
				}
				else if(isNaN(hora) || hora == " " || hora < 0){
					alert("operação invalida!!")
					horarios();
				}
				else{
					alert("Restaurante indisponível")
				}
				escolha_evento();
			}
			else{
				alert("operação invalida :(")
				horarios();

			}
		}

		function abastecer_carros() {
			alert(`HOTEL ${nome_hotel} - ABASTECER`);
			var alcol1 = parseFloat(prompt("Qual o valor do álcool no posto Wayne Oil?"));
			var gasolina1 = parseFloat(prompt("Qual o valor da gasolina no posto Wayne Oil?"));
			if (gasolina1 > alcol1) {	
				var desconto1 = ((gasolina1 - alcol1) /gasolina1) *100
				alert(`o desconte é ${desconto1} %`);
			} else {
				var desconto1 = 0;
			}
			var alcol2 = parseFloat(prompt("Qual o valor do álcool no postoStark Perol?"));
			var gasolina2 = parseFloat(prompt("Qual o valor do gasolina no posto Stark Perol?"));
			if (gasolina2 > alcol2) {	
				var desconto2 = ((gasolina2 - alcol2) /gasolina2) *100
				alert(`o desconte é ${desconto2} %`);
			} else {
				var desconto2 = 0;
			}
			if(gasolina1 < gasolina2){
				if(desconto1 > 30){
					alert("compesa mais pegar o alcool na wayne oil")
				}
				else{
					alert(`${nome_usuario}, é mais barato abastecer com gasolina no posto Wayne Oil`)
				}
			}
			else{
				if(desconto2 > 30){
					alert("compesa mais pegar o alcool na Stark Pertrol")
				}
				else{
					alert(`${nome_usuario}, é mais barato abastecer com gasolina no posto Stark Petrol`)
				}
			}
			inicio();
		}
		
		function ar(){
			alert(`HOTEL ${nome_hotel} - SERVIÇO DE AR`);
			var nomeempresa = [];
			var preço = [];
			var resposta = "S"
			while(resposta == "S"){
				var empresa = prompt('Qual o nome da empresa?');
				nomeempresa.push(empresa)
				console.log(nomeempresa)
				var valor = parseInt(prompt("Qual o valor por aparelho?"));
				
				var quantidade = parseInt( prompt("Qual a quantidade de aparelhos?"));

				var percent = parseInt( prompt("Qual a porcentagem de desconto?"));
				percent /= 100;
				
				var numin = parseInt(prompt("Qual o número mínimo de aparelhos para conseguir o desconto?"));

				if (quantidade >= numin){
					var result= valor * quantidade;
					var desconto = result * percent
					var valorfinal = result -= desconto;
					preço.push(valorfinal)
					console.log(nomeempresa)
					console.log(preço)
					alert(`O serviço de ${empresa} custará R$ ${valorfinal}`)
				}
				else{
				var resultado = valor * quantidade;
				preço.push(resultado);
				console.log(preço);
				alert(`O serviço de ${empresa} custará R$ ${resultado}`)
				}

				resposta = prompt(`Deseja informar novos dados, ${nome_usuario}? (S/N)`)
				if (resposta == "N"){
					var valormin = Math.min(...preço);
					var posicaomenor = parseInt(preço.indexOf(valormin));
					console.log(posicaomenor);
					console.log(valormin);
					console.log(nomeempresa);
					alert(`O orçamento de menor valor é o ${nomeempresa[posicaomenor]} por R$ ${Math.min(...preço)}`)
					inicio();
				}
				
			}
			;
		}

	



		function erro() {
			alert('Por favor, informe um número entre 1 e 7');
			inicio();
		}
		
		function erro2() {
			alert('Por favor, informe um número entre 1 e 5');
			escolha_evento();
		}

		function erro3() {
			alert('Por favor, informe um número entre 1 e 3');
			inicio_cadastro();
		}

		function sair() {
			var confirma = confirm('Você deseja sair?');
			if (confirma) {
				alert(`Muito Obrigado e até logo, ${nome_usuario}`)
				window.close();
			} else {
				inicio();
			}
		}
		
		inicio();
	})
		
		

		
	</script>
</body>
</html>